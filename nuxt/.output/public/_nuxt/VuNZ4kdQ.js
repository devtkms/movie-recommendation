import{J as x,_ as M,r as g,t as l,x as e,K as b,L as p,M as h,y as v,v as a,N as m,m as N}from"./rKb2n3j8.js";const T=x("/images/tmdb-logo.png"),B={class:"container"},D={key:0},L=["onClick"],O={key:0,class:"error-message"},P=["disabled"],S={key:1},j={key:2,class:"movie-list"},A=["src"],$={__name:"index",setup(z){const _={genre:"今の気分を教えてください",provider:"配信サービスを選んでください",language:"洋画・邦画を選んでください",length:"長さはどれくらいがいいですか？（任意）",year:"年代を選んでください（任意）"},f={genre:[{value:"35",label:"笑いたい"},{value:"18",label:"泣きたい"},{value:"53",label:"ハラハラしたい"},{value:"10749",label:"キュンキュンしたい"}],provider:[{value:"8",label:"Netflix"},{value:"9",label:"Amazonプライム"},{value:"337",label:"ディズニープラス"},{value:"15",label:"Hulu"}],language:[{value:"en",label:"洋画"},{value:"ja",label:"邦画"},{value:"ko",label:"韓国映画"}],length:[{value:"short",label:"短め (90分以下)"},{value:"standard",label:"標準 (90〜150分)"},{value:"long",label:"長編 (150分以上)"}],year:[{value:"1990",label:"90年代"},{value:"2000",label:"2000年代"},{value:"2010",label:"2010年代"},{value:"2020",label:"2020年以降"}]},n=g({genre:"",provider:"",language:"",length:"",year:""}),o=g([]),c=g(!1),u=g(""),y=N(),k=async()=>{if(!n.value.genre||!n.value.provider||!n.value.language){u.value="必須の質問に回答してください。";return}c.value=!0,o.value=[],u.value="";try{const s=await fetch(`${y.public.apiBase}/movies`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n.value)});if(!s.ok)throw new Error("映画データの取得に失敗しました");const t=await s.json();o.value=t}catch{u.value="映画データの取得に失敗しました。しばらくしてから再試行してください。"}finally{c.value=!1}},w=()=>{o.value=[]},C=s=>s?`https://image.tmdb.org/t/p/w500${s}`:"https://via.placeholder.com/500";return(s,t)=>(a(),l("div",B,[t[1]||(t[1]=e("h1",{class:"title"},"パッとシネマ",-1)),o.value.length===0?(a(),l("div",D,[(a(),l(p,null,h(_,(r,i)=>e("div",{class:"form-group",key:i},[e("label",null,v(r),1),e("div",{class:m(["button-group",{"two-column":["genre","provider","language","length","year"].includes(i)}])},[(a(!0),l(p,null,h(f[i],d=>(a(),l("button",{key:d.value,class:m({selected:n.value[i]===d.value}),onClick:E=>n.value[i]=d.value},v(d.label),11,L))),128))],2)])),64)),u.value?(a(),l("p",O,v(u.value),1)):b("",!0),e("button",{onClick:k,disabled:c.value},"映画を探す",8,P)])):b("",!0),c.value?(a(),l("div",S,"ロード中...")):b("",!0),o.value.length>0?(a(),l("div",j,[t[0]||(t[0]=e("h2",null,"おすすめの映画",-1)),e("ul",null,[(a(!0),l(p,null,h(o.value,r=>(a(),l("li",{key:r.id},[e("h3",null,v(r.title),1),e("img",{src:C(r.posterPath),alt:"映画ポスター"},null,8,A),e("p",null,v(r.overview),1)]))),128))]),e("button",{onClick:w},"検索画面に戻る")])):b("",!0),t[2]||(t[2]=e("footer",{class:"tmdb-credit"},[e("img",{src:T,alt:"TMDb Logo",width:"100"}),e("p",null," このアプリは TMDb API を使用していますが、TMDb によって承認、認定、またはその他の承認は受けていません。 ")],-1))]))}},J=M($,[["__scopeId","data-v-c67b91c1"]]);export{J as default};
